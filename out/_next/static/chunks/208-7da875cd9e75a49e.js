(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[208],{1750:()=>{},2327:(e,t,i)=>{"use strict";async function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=localStorage.getItem("session_id"),n={"Content-Type":"application/json",...t.headers};i&&(n.Authorization="Bearer ".concat(i));let s=await fetch(e,{...t,headers:n,credentials:"include"});if(401===s.status){localStorage.removeItem("session_id");let e=window.location.href;window.location.href="/login?callbackUrl=".concat(encodeURIComponent(e))}return s}i.d(t,{F:()=>s});let s={get:e=>n(e,{method:"GET"}),post:(e,t)=>n(e,{method:"POST",body:t?JSON.stringify(t):void 0}),put:(e,t)=>n(e,{method:"PUT",body:t?JSON.stringify(t):void 0}),patch:(e,t)=>n(e,{method:"PATCH",body:t?JSON.stringify(t):void 0}),delete:e=>n(e,{method:"DELETE"})}},10179:(e,t,i)=>{"use strict";i.d(t,{Y:()=>a});var n=i(95155),s=i(12115);function a(e){let{children:t}=e,[i,a]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{a(!0)},[]),i)?(0,n.jsx)(n.Fragment,{children:t}):null}},13886:(e,t,i)=>{"use strict";i.d(t,{p:()=>l});var n=i(95155),s=i(97003),a=i(25016),r=i(52421),o=i.n(r);function l(e){let{renderIcon:t,icon:i,title:r,description:l,action:c,className:d=""}=e;return(0,n.jsxs)("div",{className:(0,a.cn)(o().container,d),children:[(0,n.jsx)("div",{className:o().iconContainer,children:t?t():i}),(0,n.jsx)("h3",{className:o().title,children:r}),(0,n.jsx)("p",{className:o().description,children:l}),c&&(0,n.jsx)(s.$,{variant:"outline",onClick:c.onClick,className:o().actionButton,children:c.label})]})}},16645:(e,t,i)=>{"use strict";i.d(t,{TasksWidget:()=>L,P:()=>S});var n=i(95155),s=i(12115),a=i(54313),r=i(25891),o=i(58293),l=i(30082),c=i(25016),d=i(36413),h=i.n(d);let u=s.forwardRef((e,t)=>{let{className:i,...s}=e;return(0,n.jsx)(l.bL,{ref:t,className:(0,c.cn)(h().root,i),...s,children:(0,n.jsx)(l.C1,{className:h().indicator,children:(0,n.jsx)("span",{className:h().icon,children:"✓"})})})});u.displayName=l.bL.displayName;var m=i(58415),g=i(26497),p=i(60776),k=i(13886),x=i(59026),_=i(65920),f=i(77058),j=i.n(f),w=i(10179),v=i(71163),y=i(2327);async function C(){let e=await y.F.get("/api/tasks");if(!e.ok)throw Error("Failed to fetch tasks");return(await e.json()).data||[]}async function b(e){let t=await y.F.patch("/api/tasks/".concat(e.id),e);if(!t.ok)throw Error("Failed to update task");return(await t.json()).data}async function N(e){if(!(await y.F.delete("/api/tasks/".concat(e))).ok)throw Error("Failed to delete task")}async function E(e,t,i,n){let s=await y.F.post("/api/tasks",{title:e,isCompleted:t,isHighPriority:i,content:n});if(!s.ok)throw Error((await s.json()).error||"Failed to create task");return(await s.json()).data}async function S(e){try{if(!e)return null;let t=e.split("\n"),i=t[0].length>50?t[0].substring(0,50)+"...":t[0],n=await fetch("/api/tasks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:i,isCompleted:!1,priority:"none"})});if(!n.ok){let e=await n.json();throw Error(e.error||"Failed to create task")}return(await n.json()).data}catch(e){return null}}function L(e){let{searchQuery:t}=e,{setActiveTaskId:i,setNewTaskText:l,activeTask:d}=(0,x.e)(),[h,f]=(0,s.useState)([]),[y,S]=(0,s.useState)(!0),[L,T]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(async()=>{try{S(!0);let e=await C();f(e),T(!1)}catch(e){T(!0)}finally{S(!1)}})()},[]);let B=(0,s.useCallback)(async e=>{try{f(t=>t.map(t=>t.id===e.id?{...t,...e}:t)),await b(e)}catch(e){throw f(await C()),e}},[]);(0,s.useCallback)(async e=>{try{f(t=>t.filter(t=>t.id!==e)),await N(e)}catch(e){throw f(await C()),e}},[]);let I=(0,s.useCallback)(async e=>{try{let t=await E(e.title,e.isCompleted,e.isHighPriority,e.content);return f(e=>[t,...e]),i(t.id),t}catch(e){throw e}},[i]),M=(0,s.useCallback)((e,t)=>{B({id:e,isCompleted:t})},[B]);function P(){I({title:"New Task",isCompleted:!1,isHighPriority:!1,content:_.MG})}return y?(0,n.jsx)(p.O,{minHeight:"h-[280px]"}):L?(0,n.jsx)("div",{className:j().tasksError,children:"Failed to load tasks. Please try again later."}):(0,n.jsxs)(o.u,{children:[(0,n.jsx)(r.e,{title:"Tasks",children:(0,n.jsx)(a.M,{onClick:P})}),(0,n.jsx)(o.i,{children:(0,n.jsx)("div",{className:(0,c.cn)(j().tasksContainer,"custom-scrollbar"),children:(0,n.jsx)("div",{className:j().tasksListContent,children:(0,n.jsx)("div",{className:j().tasksEmpty,children:0===h.length?(0,n.jsx)(k.p,{renderIcon:()=>(0,n.jsx)("span",{className:j().tasksEmptyIcon,children:"\xd7"}),title:"Not a care",description:"Could your first task be to add a task?",action:{label:"Add Task",onClick:P},className:j().tasksScrollArea}):(0,n.jsx)(w.Y,{children:(0,n.jsx)(m.P.div,{initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},children:(0,n.jsx)(g.N,{children:h.map(e=>{let t=(null==d?void 0:d.id)===e.id;return(0,n.jsxs)(m.P.div,{layoutId:"card-".concat(e.id),initial:{y:20,opacity:0},animate:{y:0,opacity:1},exit:{x:-50,opacity:0},onClick:()=>i(e.id),className:(0,c.cn)("widget-list-item widget-list-item--tasks",t&&"active"),children:[t&&(0,n.jsx)("div",{className:j().taskActiveIndicator}),(0,n.jsxs)("div",{className:j().tasksContent,children:[(0,n.jsxs)("div",{className:j().tasksContentLeft,children:[(0,n.jsx)(u,{id:"task-".concat(e.id),checked:e.isCompleted,onCheckedChange:t=>M(e.id,t),onClick:e=>e.stopPropagation()}),(0,n.jsx)("h3",{className:(0,c.cn)(j().taskTitle,e.isCompleted?j().taskTitleCompleted:j().taskTitleIncomplete),children:e.title})]}),(0,n.jsxs)("div",{className:j().tasksContentRight,children:[e.dueDate&&(0,n.jsx)("span",{className:j().taskDueDate,children:(0,v.GP)(new Date(e.dueDate),"d MMM")}),e.isHighPriority&&(0,n.jsx)("span",{className:j().taskPriorityIndicator,children:"!"})]})]})]},e.id)})})})})})})})})]})}},18916:(e,t,i)=>{"use strict";i.d(t,{F:()=>x});var n=i(95155),s=i(23109),a=i(80853);i(50429),i(11200),i(1750);var r=i(12115);i(84145);var o=i(26497),l=i(58415),c=i(33789),d=i(97003),h=i(25016),u=i(98921),m=i.n(u);function g(e){let{isOpen:t,onClose:i,selectedText:s,position:a,onSendToMainChat:u}=e,[g,p]=(0,r.useState)([]),[k,x]=(0,r.useState)(""),[_,f]=(0,r.useState)(!1),[j,w]=(0,r.useState)(""),v=(0,r.useRef)(null),y=(0,r.useRef)(null);(0,r.useEffect)(()=>{t&&s&&0===g.length&&p([{role:"assistant",content:"I can see you've selected: \"".concat(s,'"\n\nHow can I help you with this text?')}])},[t,s,g.length]),(0,r.useEffect)(()=>{var e;null==(e=v.current)||e.scrollIntoView({behavior:"smooth"})},[g,j]);let C=a?{position:"fixed",left:Math.min(a.x,window.innerWidth-400),top:Math.min(a.y+20,window.innerHeight-400),zIndex:1e4}:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1e4},b=async()=>{if(k.trim()){x(""),p(e=>[...e,{role:"user",content:k}]),f(!0),w("Processing your request...");try{var e;let t='Context: User selected text "'.concat(s,'"\nUser question: ').concat(k),i=await fetch("/api/ai/stream",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:t,hasSeenOnboarding:!0,userName:"",agentName:""})});if(!i.ok)throw Error("Failed to get response");let n=null==(e=i.body)?void 0:e.getReader(),a=new TextDecoder,r=-1;if(n)for(;;){let{done:e,value:t}=await n.read();if(e)break;for(let e of a.decode(t).split("\n").filter(e=>e.trim()))try{let t=JSON.parse(e);switch(t.type){case"thinking":w(t.content);break;case"content":-1===r?p(e=>{let i=[...e,{role:"assistant",content:t.content,isStreaming:!0}];return r=i.length-1,i}):p(e=>{let i=[...e];return i[r]={...i[r],content:t.fullContent||i[r].content+t.content},i});break;case"complete":p(e=>{let i=[...e];return r>=0&&(i[r]={...i[r],content:t.fullContent,isStreaming:!1}),i});break;case"error":throw Error(t.content)}}catch(e){console.warn("Failed to parse chunk:",e)}}}catch(e){console.error("Mini chat error:",e),p(e=>[...e,{role:"assistant",content:"Sorry, I encountered an error. Please try again."}])}finally{f(!1),w("")}}};return t?(0,n.jsx)(o.N,{children:(0,n.jsx)(l.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:m().overlay,onClick:i,children:(0,n.jsxs)(l.P.div,{ref:y,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},style:C,className:m().chatContainer,onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)("div",{className:m().header,children:[(0,n.jsxs)("div",{className:m().headerLeft,children:[(0,n.jsx)("div",{className:m().statusDot}),(0,n.jsx)("h3",{className:m().title,children:"AI Assistant"})]}),(0,n.jsxs)("div",{className:m().headerRight,children:[(0,n.jsxs)(d.$,{variant:"ghost",size:"sm",onClick:()=>{u&&u(g),i()},className:m().sendButton,disabled:g.length<=1,children:[(0,n.jsx)("span",{className:m().sendIcon,children:"•"}),"Send to Main"]}),(0,n.jsx)(d.$,{variant:"ghost",size:"icon",onClick:i,className:m().closeButton,children:(0,n.jsx)("span",{className:m().closeIcon,children:"\xd7"})})]})]}),(0,n.jsxs)("div",{className:m().messagesContainer,children:[g.map((e,t)=>(0,n.jsx)("div",{className:(0,h.cn)(m().messageWrapper,"user"===e.role?m().messageWrapperUser:m().messageWrapperAssistant),children:(0,n.jsxs)("div",{className:(0,h.cn)(m().messageBubble,"user"===e.role?m().messageBubbleUser:m().messageBubbleAssistant),children:[e.content,e.isStreaming&&(0,n.jsx)("span",{className:m().streamingCursor})]})},t)),j&&(0,n.jsx)("div",{className:m().thinkingContainer,children:(0,n.jsx)("div",{className:m().thinkingBubble,children:(0,n.jsxs)("div",{className:m().thinkingContent,children:[(0,n.jsxs)("div",{className:m().thinkingDots,children:[(0,n.jsx)("div",{className:m().thinkingDot1}),(0,n.jsx)("div",{className:m().thinkingDot2}),(0,n.jsx)("div",{className:m().thinkingDot3})]}),(0,n.jsx)("span",{className:m().thinkingText,children:j})]})})}),(0,n.jsx)("div",{ref:v})]}),(0,n.jsx)("div",{className:m().inputContainer,children:(0,n.jsxs)("div",{className:m().inputWrapper,children:[(0,n.jsx)(c.p,{value:k,onChange:e=>x(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),b())},placeholder:"Ask about this text...",className:m().input,disabled:_}),(0,n.jsx)(d.$,{onClick:b,size:"sm",className:m().submitButton,disabled:!k.trim()||_,children:(0,n.jsx)("span",{className:m().submitIcon,children:"•"})})]})})]})})}):null}var p=i(69452);function k(e){let{children:t,className:i=""}=e;return(0,n.jsx)("span",{className:"bg-gradient-to-r from-blue-500 via-indigo-500 to-blue-600 bg-clip-text text-transparent animate-gradient ".concat(i),children:t})}let x=(0,r.memo)(function(e){let{initialContent:t,onChange:i,onEditorReady:o,editable:l=!0,theme:c="dark",className:d}=e,h=(0,r.useRef)(null),u=(0,r.useRef)(""),m=(0,r.useRef)(!1),x=(0,r.useRef)(null),[_,f]=(0,r.useState)(!1),j=(0,r.useRef)(null),w=(0,r.useRef)(null),[v,y]=(0,r.useState)(""),[C,b]=(0,r.useState)(null),[N,E]=(0,r.useState)(!1),[S,L]=(0,r.useState)(!1),[T,B]=(0,r.useState)({x:0,y:0}),{setMessages:I,openChat:M}=(0,p.v)()||{setMessages:()=>{},openChat:()=>{}},P=(0,s.Hx)({initialContent:t||void 0,domAttributes:{editor:{class:"editor-with-placeholder"}}});return(0,r.useEffect)(()=>{m.current||(u.current=JSON.stringify(t||[]),m.current=!0),o&&o(P);let e=setTimeout(()=>{x.current=P,f(!0)},100);return()=>clearTimeout(e)},[P,o,t]),(0,r.useEffect)(()=>{let e;if(i){try{let t=P.onEditorContentChange(()=>{let e=JSON.stringify(P.document||[]);e!==u.current&&(u.current=e,i(P.document))});"function"==typeof t&&(e=t)}catch(e){console.warn("Content change handler setup error:",e)}return()=>{h.current&&(clearTimeout(h.current),h.current=null),"function"==typeof e&&e()}}},[P,i]),(0,r.useEffect)(()=>{try{var e;let t=null==(e=P.onSelectionChange)?void 0:e.call(P,()=>{if(P)try{let e=P.getSelectedText();if(console.log("Text selection changed:",e),e&&e.trim().length>0){y(e.trim());let t=window.getSelection();if(t&&t.rangeCount>0){let e=t.getRangeAt(0).getBoundingClientRect();b({x:e.left+e.width/2,y:e.bottom})}}else y(""),b(null)}catch(e){console.warn("Selection tracking error:",e)}});return()=>{"function"==typeof t&&t()}}catch(e){return console.warn("Selection change setup error:",e),()=>{}}},[P]),(0,r.useEffect)(()=>{let e=e=>{S&&j.current&&!j.current.contains(e.target)&&w.current&&!w.current.contains(e.target)&&L(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[S]),(0,n.jsxs)("div",{className:"flex flex-col h-full w-full ".concat(d||""),children:[(0,n.jsx)("link",{rel:"stylesheet",href:"/styles/simple-editor-toolbar.css"}),(0,n.jsx)(a.NP,{editor:P,editable:l,theme:c,sideMenu:!1,className:"editor-with-custom-placeholder",formattingToolbar:!1,children:(0,n.jsx)(s.T9,{formattingToolbar:()=>{if(!_||!x.current)return console.log("Formatting toolbar not ready"),null;let e=x.current;try{var t,i;let s=null==(t=e.getTextCursorPosition())?void 0:t.block,a=e.getActiveStyles();if(!s)return console.log("No current block for formatting toolbar"),null;console.log("Rendering formatting toolbar");let r=(null==(i=s.props)?void 0:i.textAlignment)||"left",o=["left","center","right"],l=o.indexOf(r),c=o[(l+1)%o.length];return(0,n.jsxs)("div",{className:"bn-formatting-toolbar",children:[(0,n.jsxs)("button",{onClick:()=>{try{let t=e.getSelectedText();console.log("Ask Ybot clicked, selection:",t),t&&t.trim()&&(y(t.trim()),E(!0))}catch(e){console.warn("Ask Ybot failed:",e)}},title:"Ask Ybot about selected text",disabled:!v,className:"ask-ybot-btn",children:[(0,n.jsxs)("svg",{fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 14 9",width:"18",height:"12",children:[(0,n.jsx)("path",{d:"M10.538 3.914c.128 0 .232.104.232.232v.81a.23.23 0 0 1-.232.232h-.81a.23.23 0 0 1-.232-.232v-.81c0-.128.104-.232.232-.232zm-6.485 0c.128 0 .232.104.232.232v.81a.23.23 0 0 1-.232.232h-.81a.23.23 0 0 1-.232-.232v-.81c0-.128.104-.232.232-.232z",fill:"#fff"}),(0,n.jsx)("path",{d:"M7.76 3.725q0-1.287.65-1.997c.433-.473.862-.71 1.636-.71q1.16 0 1.81.71t.651 1.997V5.2q0 1.324-.65 2.015c-.434.46-.863.69-1.636.69q-1.161 0-1.811-.69T7.76 5.2zm2.46 3.462c.54 0 .77-.176 1.037-.53q.41-.539.41-1.513V3.78q0-.453-.1-.823a1.7 1.7 0 0 0-.31-.643 1.36 1.36 0 0 0-.51-.426q-.3-.15-.701-.151c-.273 0-.336.05-.536.151q-.3.152-.51.426a1.8 1.8 0 0 0-.3.643q-.1.369-.1.823v1.363q0 .975.4 1.513.41.53 1.22.53M1.274 3.655q0-1.308.65-2.03c.434-.481.863-.722 1.637-.722q1.16 0 1.81.722t.65 2.03v1.502q0 1.347-.65 2.05c-.433.468-.862.702-1.636.702q-1.16 0-1.81-.702-.651-.703-.651-2.05zm2.461 3.523c.54 0 .77-.18 1.036-.54q.41-.547.41-1.539V3.713a3.3 3.3 0 0 0-.1-.837 1.8 1.8 0 0 0-.31-.654 1.4 1.4 0 0 0-.51-.434 1.5 1.5 0 0 0-.7-.154c-.274 0-.336.052-.536.154q-.3.154-.51.434-.201.27-.3.654-.1.376-.1.837V5.1q0 .99.4 1.54.41.54 1.22.539m2.75-3.049a.434.434 0 0 1 .869 0v3.533a.434.434 0 0 1-.869 0zm-5.732.182s-.29.23-.29.434.29.434.29.434c0 .872-.753.064-.753-.434s.753-1.306.753-.434m12.183.868s.29-.23.29-.434-.29-.435-.29-.435c0-.871.753-.063.753.435 0 .497-.753 1.306-.753.434",fill:"#fff"})]}),(0,n.jsx)(k,{children:"Ask Ybot"})]}),(0,n.jsx)("div",{className:"toolbar-divider"}),(0,n.jsxs)("select",{value:s.type||"paragraph",onChange:t=>{try{e.updateBlock(s,{type:t.target.value})}catch(e){console.warn("Block type update failed:",e)}},className:"bn-dropdown",style:{width:"60px"},children:[(0,n.jsx)("option",{value:"paragraph",children:"P"}),(0,n.jsx)("option",{value:"heading",children:"H1"}),(0,n.jsx)("option",{value:"heading",children:"H2"}),(0,n.jsx)("option",{value:"heading",children:"H3"})]}),(0,n.jsxs)("button",{onClick:()=>{try{e.updateBlock(s,{props:{textAlignment:c}})}catch(e){console.warn("Alignment toggle failed:",e)}},title:"Align ".concat(c),className:"alignment-btn",style:{position:"relative"},children:["left"===r&&(0,n.jsxs)("svg",{width:"12",height:"9",viewBox:"0 0 12 9",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsxs)("g",{clipPath:"url(#clip0_475_1264)",children:[(0,n.jsx)("path",{d:"M9.31982 2H1.06982",stroke:"#E6E6E6",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M5.65316 4.5H1.06982",stroke:"#E6E6E6",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M7.48649 7H1.06982",stroke:"#E6E6E6",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,n.jsx)("defs",{children:(0,n.jsx)("clipPath",{id:"clip0_475_1264",children:(0,n.jsx)("rect",{width:"11",height:"9",fill:"white",transform:"translate(0.0698242)"})})})]}),"center"===r&&(0,n.jsxs)("svg",{width:"11",height:"9",viewBox:"0 0 11 9",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("path",{d:"M9.625 2H1.375",stroke:"#E6E6E6",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M7.79183 4.5H3.2085",stroke:"#E6E6E6",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M8.70817 7H2.2915",stroke:"#E6E6E6",strokeLinecap:"round",strokeLinejoin:"round"})]}),"right"===r&&(0,n.jsxs)("svg",{width:"11",height:"9",viewBox:"0 0 11 9",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("path",{d:"M9 2H0.75",stroke:"#E6E6E6",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M8.99984 4.5H4.4165",stroke:"#E6E6E6",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M9.00016 7H2.5835",stroke:"#E6E6E6",strokeLinecap:"round",strokeLinejoin:"round"})]})]}),(0,n.jsx)("button",{onClick:()=>{try{e.toggleStyles({bold:!0})}catch(e){console.warn("Bold toggle failed:",e)}},"data-active":(null==a?void 0:a.bold)||!1,title:"Bold",children:(0,n.jsx)("strong",{children:"B"})}),(0,n.jsx)("button",{onClick:()=>{try{e.toggleStyles({italic:!0})}catch(e){console.warn("Italic toggle failed:",e)}},"data-active":(null==a?void 0:a.italic)||!1,title:"Italic",children:(0,n.jsx)("em",{children:"I"})}),(0,n.jsx)("button",{onClick:()=>{try{e.toggleStyles({underline:!0})}catch(e){console.warn("Underline toggle failed:",e)}},"data-active":(null==a?void 0:a.underline)||!1,title:"Underline",children:(0,n.jsx)("u",{children:"U"})}),(0,n.jsx)("div",{className:"formatting-dropdown",children:(0,n.jsx)("button",{ref:w,onClick:()=>{if(L(!S),w.current){let e=w.current.getBoundingClientRect();B({x:e.left,y:e.bottom+5})}},title:"More formatting options",className:"formatting-dropdown-btn",children:"⋯"})}),(0,n.jsx)("div",{className:"toolbar-divider"}),(0,n.jsxs)("button",{onClick:()=>{try{let t=e.getSelectedText();if(console.log("Create task clicked:",t),t&&t.trim()){let e={title:t.trim(),description:'Task created from note selection: "'.concat(t.trim(),'"'),status:"pending",priority:"medium",dueDate:null,tags:["from-notes"]};fetch("/api/tasks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>{e.ok?console.log("Task created successfully from selected text"):console.error("Failed to create task")}).catch(e=>{console.error("Error creating task:",e)})}}catch(e){console.warn("Create task failed:",e)}},title:"Create task",disabled:!v,className:"create-task-btn",children:[(0,n.jsxs)("svg",{fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 14 13",width:"14",height:"13",children:[(0,n.jsxs)("g",{clipPath:"url(#a)",stroke:"#E6E6E6",strokeWidth:".7",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("path",{d:"M10.7 5.8A3.7 3.7 0 1 1 9 3.3"}),(0,n.jsx)("path",{d:"m6 6.1 1 1.2 3.8-3.8"})]}),(0,n.jsx)("defs",{children:(0,n.jsx)("clipPath",{id:"a",children:(0,n.jsx)("path",{fill:"#fff",d:"M2.6 2h9v9h-9z"})})})]}),"Create task"]})]})}catch(e){return console.warn("Formatting toolbar render failed:",e),null}}})}),S&&(0,n.jsxs)("div",{ref:j,className:"formatting-options show",style:{left:T.x,top:T.y},children:[(0,n.jsxs)("button",{onClick:()=>{try{x.current&&x.current.toggleStyles({strike:!0})}catch(e){console.warn("Strike toggle failed:",e)}L(!1)},title:"Strikethrough",children:[(0,n.jsx)("s",{children:"S"})," Strikethrough"]}),(0,n.jsxs)("button",{onClick:()=>{try{x.current&&console.log("Link button clicked")}catch(e){console.warn("Link toggle failed:",e)}L(!1)},title:"Link",children:[(0,n.jsxs)("svg",{width:"12",height:"11",viewBox:"0 0 12 11",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{display:"inline",marginRight:"4px"},children:[(0,n.jsx)("g",{clipPath:"url(#clip0_479_2074)",children:(0,n.jsx)("path",{d:"M3.94077 8.21509H2.85474C2.13465 8.21509 1.44406 7.92903 0.934879 7.41986C0.425702 6.91068 0.139648 6.22009 0.139648 5.5C0.139648 4.77991 0.425702 4.08932 0.934879 3.58014C1.44406 3.07097 2.13465 2.78491 2.85474 2.78491H3.94077M7.19888 2.78491H8.28491C9.005 2.78491 9.69559 3.07097 10.2048 3.58014C10.7139 4.08932 11 4.77991 11 5.5C11 6.22009 10.7139 6.91068 10.2048 7.41986C9.69559 7.92903 9.005 8.21509 8.28491 8.21509H7.19888M3.39775 5.5H7.74189",stroke:"#C4C4C4",strokeWidth:"1.08604",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,n.jsx)("defs",{children:(0,n.jsx)("clipPath",{id:"clip0_479_2074",children:(0,n.jsx)("rect",{width:"11",height:"9.43018",fill:"white",transform:"translate(0.0698242 0.784912)"})})})]}),"Link"]}),(0,n.jsxs)("button",{onClick:()=>{try{if(x.current){var e;let t=null==(e=x.current.getTextCursorPosition())?void 0:e.block;t&&x.current.updateBlock(t,{type:"codeBlock"})}}catch(e){console.warn("Code block failed:",e)}L(!1)},title:"Code Block",children:[(0,n.jsxs)("svg",{width:"12",height:"13",viewBox:"0 0 12 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{display:"inline",marginRight:"4px"},children:[(0,n.jsx)("g",{clipPath:"url(#clip0_479_2079)",children:(0,n.jsx)("path",{d:"M8.82793 8.67197L11 6.4999L8.82793 4.32783M2.31172 4.32783L0.139648 6.4999L2.31172 8.67197M6.92737 2.15576L4.21228 10.844",stroke:"#C4C4C4",strokeWidth:"1.08604",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,n.jsx)("defs",{children:(0,n.jsx)("clipPath",{id:"clip0_479_2079",children:(0,n.jsx)("rect",{width:"11",height:"12.6883",fill:"white",transform:"translate(0.0698242 0.155762)"})})})]}),"Code Block"]})]}),(0,n.jsx)(g,{isOpen:N,onClose:()=>{E(!1),y(""),b(null)},selectedText:v,position:C,onSendToMainChat:e=>{let t=e.map(e=>({role:e.role,content:e.content})),i={role:"assistant",content:'[Continuing conversation about: "'.concat(v,'"]')};I(e=>[...e,i,...t]),M()}})]})})},25891:(e,t,i)=>{"use strict";i.d(t,{e:()=>a});var n=i(95155);i(12115);var s=i(25016);function a(e){let{title:t,children:i,className:a,titleClassName:r}=e;return(0,n.jsxs)("div",{className:(0,s.cn)("widget-header widget-flex-between",a),children:[(0,n.jsx)("h2",{className:(0,s.cn)("widget-title",r),children:t}),i&&(0,n.jsx)("div",{className:"widget-flex widget-gap-2",children:i})]})}},36413:e=>{e.exports={root:"checkbox_root__cIa4N",peer:"checkbox_peer__aIlW9",indicator:"checkbox_indicator__oXXUp",icon:"checkbox_icon__GxYT_"}},52421:e=>{e.exports={container:"empty-state_container__xcxwy",iconContainer:"empty-state_iconContainer__Ic0Bk",title:"empty-state_title__YzLCB",description:"empty-state_description___eTzf",actionButton:"empty-state_actionButton__qtwEf"}},54313:(e,t,i)=>{"use strict";i.d(t,{M:()=>r});var n=i(95155),s=i(97003),a=i(82180);function r(e){let{tooltip:t,children:i,...r}=e,o=(0,n.jsx)(s.$,{size:"icon",variant:"ghost-icon",...r,children:i||"+"});return t?(0,n.jsx)(a.Bc,{children:(0,n.jsxs)(a.m_,{children:[(0,n.jsx)(a.k$,{asChild:!0,children:o}),(0,n.jsx)(a.ZI,{children:(0,n.jsx)("p",{children:t})})]})}):o}},58293:(e,t,i)=>{"use strict";i.d(t,{i:()=>r,u:()=>a});var n=i(95155);i(12115);var s=i(25016);function a(e){let{children:t,className:i,...a}=e;return(0,n.jsx)("div",{className:(0,s.cn)("widget-relative widget-full-height widget-full-width",i),...a,children:(0,n.jsx)("div",{className:"widget-absolute widget-full rounded-[22px] widget-background",children:(0,n.jsx)("div",{className:"widget-flex-column widget-full-height",children:t})})})}function r(e){let{children:t,className:i,scrollable:a=!0}=e,r=(0,s.cn)("widget-flex-1",a&&"widget-overflow-auto custom-scrollbar",i);return(0,n.jsx)("div",{className:r,children:t})}},60776:(e,t,i)=>{"use strict";i.d(t,{O:()=>l});var n=i(95155),s=i(15239),a=i(25016),r=i(89953),o=i.n(r);function l(e){let{className:t="",minHeight:i="min-h-[16rem]"}=e;return(0,n.jsx)("div",{className:(0,a.cn)(o().container,t,i),children:(0,n.jsx)("div",{className:o().imageContainer,children:(0,n.jsx)(s.default,{src:"/assets/loading.gif",alt:"Loading...",fill:!0,className:o().image,sizes:"60px",priority:!0})})})}},77058:e=>{e.exports={tasksError:"tasks-widget_tasksError__v9AXy",tasksContainer:"tasks-widget_tasksContainer___cujF",tasksListContent:"tasks-widget_tasksListContent__hVEaP",tasksEmpty:"tasks-widget_tasksEmpty__jk60Y",tasksEmptyIcon:"tasks-widget_tasksEmptyIcon__LECDA",tasksScrollArea:"tasks-widget_tasksScrollArea__Sosc5",tasksContent:"tasks-widget_tasksContent__mf9gw",tasksContentLeft:"tasks-widget_tasksContentLeft__flRHM",tasksContentRight:"tasks-widget_tasksContentRight__h_m1P",taskItem:"tasks-widget_taskItem__eOoPU",taskItemActive:"tasks-widget_taskItemActive__1_SVQ",taskActiveIndicator:"tasks-widget_taskActiveIndicator__TZxzM",taskTitle:"tasks-widget_taskTitle__Xts3e",taskTitleCompleted:"tasks-widget_taskTitleCompleted__4wG2l",taskTitleIncomplete:"tasks-widget_taskTitleIncomplete__7W6j7",taskDueDate:"tasks-widget_taskDueDate__VU1BI",taskPriorityIndicator:"tasks-widget_taskPriorityIndicator__DxKa4"}},84145:()=>{},89953:e=>{e.exports={container:"widget-loader_container__Rcw41",pulse:"widget-loader_pulse__X6rej",imageContainer:"widget-loader_imageContainer__U8lFv",image:"widget-loader_image__T018N"}},98921:e=>{e.exports={overlay:"mini-ai-chat_overlay__NUINj",chatContainer:"mini-ai-chat_chatContainer__LXSUB",header:"mini-ai-chat_header__ebxtA",headerLeft:"mini-ai-chat_headerLeft__9okfv",statusDot:"mini-ai-chat_statusDot__IS5ef",pulse:"mini-ai-chat_pulse__LOaMt",title:"mini-ai-chat_title__p2m3O",headerRight:"mini-ai-chat_headerRight__pmMvo",sendButton:"mini-ai-chat_sendButton__nvOOI",sendIcon:"mini-ai-chat_sendIcon__Dmdno",closeButton:"mini-ai-chat_closeButton__XRugy",closeIcon:"mini-ai-chat_closeIcon___mOTt",messagesContainer:"mini-ai-chat_messagesContainer__jn_ne",messageWrapper:"mini-ai-chat_messageWrapper__zYGLX",messageWrapperUser:"mini-ai-chat_messageWrapperUser__D67tS",messageWrapperAssistant:"mini-ai-chat_messageWrapperAssistant__QQrYU",messageBubble:"mini-ai-chat_messageBubble__w3NlE",messageBubbleUser:"mini-ai-chat_messageBubbleUser__xvCjw",messageBubbleAssistant:"mini-ai-chat_messageBubbleAssistant__BClU6",streamingCursor:"mini-ai-chat_streamingCursor__XbsSZ",thinkingContainer:"mini-ai-chat_thinkingContainer__mdbkd",thinkingBubble:"mini-ai-chat_thinkingBubble__WKV_Z",thinkingContent:"mini-ai-chat_thinkingContent__si266",thinkingDots:"mini-ai-chat_thinkingDots___89cC",thinkingDot1:"mini-ai-chat_thinkingDot1__gNmTW",bounce:"mini-ai-chat_bounce__zMcF_",thinkingDot2:"mini-ai-chat_thinkingDot2__qCe_r",thinkingDot3:"mini-ai-chat_thinkingDot3__4ccKa",thinkingText:"mini-ai-chat_thinkingText__o0mMX",inputContainer:"mini-ai-chat_inputContainer__TeSNi",inputWrapper:"mini-ai-chat_inputWrapper__wqk7F",input:"mini-ai-chat_input__FI18A",submitButton:"mini-ai-chat_submitButton__vE2gf",submitIcon:"mini-ai-chat_submitIcon__UiaD2"}}}]);