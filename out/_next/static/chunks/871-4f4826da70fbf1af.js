(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[871],{8525:(e,r,t)=>{"use strict";t.d(r,{createClient:()=>a});var s=t(16010);let o=null;function a(){return o||(console.log("Creating new Supabase browser client..."),o=(0,s.createBrowserClient)("https://qclvzjiyglvxtctauyhb.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFjbHZ6aml5Z2x2eHRjdGF1eWhiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk5Nzg4ODUsImV4cCI6MjA2NTU1NDg4NX0.xOL9yscpojoA2DiybM8EPt9a9wqpbbXs6ZxNjt2WpI8"),console.log("Supabase client created successfully")),o}},14888:(e,r,t)=>{"use strict";t.d(r,{_s:()=>f,cp:()=>b,zj:()=>w,BE:()=>x,gk:()=>N,Uz:()=>_});var s=t(95155),o=t(12115),a=t(83161),n=t(89511),l=t(19628),i=t.n(l),d=t(25016);n.bL,n.l9;let c=n.ZL;n.bm;let u=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,s.jsx)(n.hJ,{ref:r,className:(0,d.cn)(i().overlay,t),...o})});u.displayName=n.hJ.displayName,o.forwardRef((e,r)=>{let{className:t,children:o,...a}=e;return(0,s.jsxs)(c,{children:[(0,s.jsx)(u,{}),(0,s.jsxs)(n.UC,{ref:r,className:(0,d.cn)(i().content,t),...a,children:[o,(0,s.jsxs)(n.bm,{className:i().closeBtn,children:[(0,s.jsx)("span",{className:i().closeIcon,children:"\xd7"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}).displayName=n.UC.displayName;let g=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,s.jsx)(n.hE,{ref:r,className:(0,d.cn)(i().title,t),...o})});g.displayName=n.hE.displayName,o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,s.jsx)(n.VY,{ref:r,className:(0,d.cn)(i().description,t),...o})}).displayName=n.VY.displayName;var h=t(861),p=t(90969),m=t.n(p);let f=e=>{let{shouldScaleBackground:r=!0,...t}=e;return(0,s.jsx)(a._s.Root,{shouldScaleBackground:r,...t})};f.displayName="Drawer";let _=a._s.Trigger,v=a._s.Portal,b=a._s.Close,y=o.forwardRef((e,r)=>{let{className:t,variant:o="default",...n}=e;return(0,s.jsx)(a._s.Overlay,{ref:r,className:(0,d.cn)(m().overlay,m()[o],t),...n})});y.displayName=a._s.Overlay.displayName;let w=o.forwardRef((e,r)=>{let{className:t,children:o,overlayVariant:n="default",direction:l="bottom",...i}=e;return(0,s.jsxs)(v,{children:[(0,s.jsx)(y,{variant:n}),(0,s.jsxs)(a._s.Content,{ref:r,className:(0,d.cn)("modal","right"===l?"fixed top-0 right-0 bottom-0 z-50 flex h-screen w-[33.333333%] min-w-[300px] flex-col border bg-[#111111]":"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-[80vh] flex-col border bg-[#111111]",t),style:{borderRadius:"right"===l?"10px 0 0 10px":"10px 10px 0 0"},...i,children:["bottom"===l&&(0,s.jsx)("div",{className:m().handle,style:{borderRadius:"50%"}}),(0,s.jsx)(h.bL,{children:(0,s.jsx)(N,{children:"Drawer Content"})}),o]})]})});w.displayName=a._s.Content.displayName;let x=e=>{let{className:r,...t}=e;return(0,s.jsx)("div",{className:(0,d.cn)("modal-header",r),...t})};x.displayName="DrawerHeader";let N=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,s.jsx)(g,{ref:r,className:(0,d.cn)("text-lg font-semibold leading-none",t),...o})});N.displayName=a._s.Title.displayName,o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,s.jsx)(a._s.Description,{ref:r,className:(0,d.cn)("text-sm text-muted-foreground",t),...o})}).displayName=a._s.Description.displayName},19628:e=>{e.exports={overlay:"dialog_overlay__TQ4Xy",content:"dialog_content__rbYH_",closeBtn:"dialog_closeBtn__fvD4b",closeIcon:"dialog_closeIcon____OIA",header:"dialog_header__sj6Fu",footer:"dialog_footer__Wi0Nr",title:"dialog_title__V8_8w",description:"dialog_description__4EYyg"}},25016:(e,r,t)=>{"use strict";t.d(r,{cn:()=>a});var s=t(2821),o=t(75889);function a(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,o.QP)((0,s.$)(r))}},30181:(e,r,t)=>{"use strict";t.d(r,{AA:()=>o,dF:()=>a});let s=new Map;function o(e,r,t){let o=Date.now()+1e3*t.expires_in;s.set(e,{user:r,session:t,expiresAt:o})}function a(e){s.delete(e)}},56414:(e,r,t)=>{"use strict";t.d(r,{A:()=>i,w:()=>d});var s=t(95155),o=t(12115),a=t(8525),n=t(30181);let l=(0,o.createContext)(void 0);function i(){let e=(0,o.useContext)(l);if(void 0===e)throw Error("useAuth must be used within a SupabaseAuthProvider");return e}function d(e){let{children:r}=e;console.log("SupabaseAuthProvider: Component rendering");let[t,i]=(0,o.useState)(null),[d,c]=(0,o.useState)(null),[u,g]=(0,o.useState)(!0),[h]=(0,o.useState)(()=>(console.log("SupabaseAuthProvider: Creating Supabase client"),(0,a.createClient)()));(0,o.useEffect)(()=>{if(console.log("SupabaseAuthProvider: useEffect triggered!"),!h){console.error("SupabaseAuthProvider: No supabase client!"),g(!1);return}let e=!0;(async()=>{console.log("SupabaseAuthProvider: Checking for existing session in storage");try{var r;let{data:{session:t},error:s}=await h.auth.getSession();if(!e)return;if(console.log("SupabaseAuthProvider: Session check result:",{hasSession:!!t,hasUser:!!(null==t?void 0:t.user),email:null==t||null==(r=t.user)?void 0:r.email,error:null==s?void 0:s.message}),t&&t.user){let e=localStorage.getItem("session_id");e||(e=crypto.randomUUID(),localStorage.setItem("session_id",e)),(0,n.AA)(e,t.user,t),c(t),i(t.user),console.log("SupabaseAuthProvider: User set:",t.user.email)}else{let e=localStorage.getItem("session_id");e&&(localStorage.removeItem("session_id"),(0,n.dF)(e)),c(null),i(null),console.log("SupabaseAuthProvider: No active session in storage")}}catch(e){console.error("SupabaseAuthProvider: Error checking session:",e),c(null),i(null)}finally{e&&(g(!1),console.log("SupabaseAuthProvider: Initial load complete"))}})();let{data:{subscription:r}}=h.auth.onAuthStateChange(async(r,t)=>{var s;if(console.log("SupabaseAuthProvider: Auth state changed:",r),e&&(c(t),i(null!=(s=null==t?void 0:t.user)?s:null),g(!1),"SIGNED_IN"===r&&(null==t?void 0:t.user))){let e=crypto.randomUUID();localStorage.setItem("session_id",e),(0,n.AA)(e,t.user,t),console.log("SIGNED_IN event - Session stored with ID:",e),console.log("User authentication complete, redirecting..."),"/login"===window.location.pathname&&(window.location.href="/")}});return()=>{console.log("SupabaseAuthProvider: Cleaning up subscription"),e=!1,r.unsubscribe()}},[h]);let p=async e=>{let{error:r}=await h.auth.signInWithOAuth({provider:e,options:{redirectTo:"".concat(window.location.origin,"/auth/callback"),scopes:"openid email profile https://www.googleapis.com/auth/calendar.readonly https://www.googleapis.com/auth/calendar.events.readonly",queryParams:{access_type:"offline",prompt:"consent"},skipBrowserRedirect:!1}});if(r)throw console.error("Error signing in:",r),r},m=async()=>{let e=localStorage.getItem("session_id");e&&((0,n.dF)(e),localStorage.removeItem("session_id"));let{error:r}=await h.auth.signOut();if(r)throw console.error("Error signing out:",r),r};return(0,s.jsx)(l.Provider,{value:{user:t,session:d,signIn:p,signOut:m,loading:u},children:r})}},90969:e=>{e.exports={overlay:"drawer_overlay__Ed4KW",default:"drawer_default__73I_8",settings:"drawer_settings__aVw9d",notes:"drawer_notes__pHISN",calendar:"drawer_calendar__mEe8L",handle:"drawer_handle__91T4j"}},97003:(e,r,t)=>{"use strict";t.d(r,{$:()=>d,r:()=>i});var s=t(95155),o=t(12115),a=t(32467),n=t(83101),l=t(25016);let i=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground","ghost-icon":"border border-[#252525] bg-[#1a1a1a] hover:bg-[#252525] transition-colors text-white",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-8 w-8 rounded-full"}},defaultVariants:{variant:"default",size:"default"}}),d=o.forwardRef((e,r)=>{let{className:t,variant:o,size:n,asChild:d=!1,...c}=e,u=d?a.DX:"button";return(0,s.jsx)(u,{className:(0,l.cn)(i({variant:o,size:n,className:t})),ref:r,...c})});d.displayName="Button"}}]);